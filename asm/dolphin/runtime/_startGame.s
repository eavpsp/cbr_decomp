
.include "macros.s"

.section .init, "ax"  # 0x80003100 - 0x80005600 ; 0x00002500
/*KEEP SYSTEM REQ*/

.global __start
__start:
/* 80005240 00002240  48 00 01 5D */	bl __init_registers
/* 80005244 00002244  48 00 02 A9 */	bl __init_hardware
/* 80005248 00002248  38 00 FF FF */	li r0, -0x1
/* 8000524C 0000224C  94 21 FF F8 */	stwu r1, -0x8(r1)
/* 80005250 00002250  90 01 00 04 */	stw r0, 0x4(r1)
/* 80005254 00002254  90 01 00 00 */	stw r0, 0x0(r1)
/* 80005258 00002258  48 00 01 D5 */	bl __init_data
/* 8000525C 0000225C  38 00 00 00 */	li r0, 0x0
/* 80005260 00002260  3C C0 80 00 */	lis r6, 0x80000044@ha
/* 80005264 00002264  38 C6 00 44 */	addi r6, r6, 0x80000044@l
/* 80005268 00002268  90 06 00 00 */	stw r0, 0x0(r6)
/* 8000526C 0000226C  3C C0 80 00 */	lis r6, 0x800000F4@ha
/* 80005270 00002270  38 C6 00 F4 */	addi r6, r6, 0x800000F4@l
/* 80005274 00002274  80 C6 00 00 */	lwz r6, 0x0(r6)
_check_TRK:
/* 80005278 00002278  28 06 00 00 */	cmplwi r6, 0x0
/* 8000527C 0000227C  41 82 00 0C */	beq _load_lomem_debug_flag
/* 80005280 00002280  80 E6 00 0C */	lwz r7, 0xc(r6)
/* 80005284 00002284  48 00 00 24 */	b _check_debug_flag
_load_lomem_debug_flag:
/* 80005288 00002288  3C A0 80 00 */	lis r5, 0x80000034@ha
/* 8000528C 0000228C  38 A5 00 34 */	addi r5, r5, 0x80000034@l
/* 80005290 00002290  80 A5 00 00 */	lwz r5, 0x0(r5)
/* 80005294 00002294  28 05 00 00 */	cmplwi r5, 0x0
/* 80005298 00002298  41 82 00 4C */	beq _goto_main
/* 8000529C 0000229C  3C E0 80 00 */	lis r7, 0x800030E8@ha
/* 800052A0 000022A0  38 E7 30 E8 */	addi r7, r7, 0x800030E8@l
/* 800052A4 000022A4  80 E7 00 00 */	lwz r7, 0x0(r7)

.global _check_debug_flag
_check_debug_flag:
/* 800052A8 000022A8  38 A0 00 00 */	li r5, 0x0
/* 800052AC 000022AC  28 07 00 02 */	cmplwi r7, 0x2
/* 800052B0 000022B0  41 82 00 24 */	beq _goto_inittrk
/* 800052B4 000022B4  28 07 00 03 */	cmplwi r7, 0x3
/* 800052B8 000022B8  38 A0 00 01 */	li r5, 0x1
/* 800052BC 000022BC  41 82 00 18 */	beq _goto_inittrk
/* 800052C0 000022C0  28 07 00 04 */	cmplwi r7, 0x4
/* 800052C4 000022C4  40 82 00 20 */	bne _goto_main
/* 800052C8 000022C8  38 A0 00 02 */	li r5, 0x2
/* 800052CC 000022CC  4B FF FF 61 */	bl __set_debug_bba
/* 800052D0 000022D0  48 00 00 14 */	b _goto_main
_goto_inittrk:
/* 800052D4 000022D4  3C C0 80 15 */	lis r6, InitMetroTRK@ha
/* 800052D8 000022D8  38 C6 F5 30 */	addi r6, r6, InitMetroTRK@l
/* 800052DC 000022DC  7C C8 03 A6 */	mtlr r6
/* 800052E0 000022E0  4E 80 00 21 */	blrl

.global _goto_main
_goto_main:
/* 800052E4 000022E4  3C C0 80 00 */	lis r6, 0x800000F4@ha
/* 800052E8 000022E8  38 C6 00 F4 */	addi r6, r6, 0x800000F4@l
/* 800052EC 000022EC  80 A6 00 00 */	lwz r5, 0x0(r6)
/* 800052F0 000022F0  28 05 00 00 */	cmplwi r5, 0x0
/* 800052F4 000022F4  41 A2 00 50 */	bc 13, 2, _no_args
/* 800052F8 000022F8  80 C5 00 08 */	lwz r6, 0x8(r5)
/* 800052FC 000022FC  28 06 00 00 */	cmplwi r6, 0x0
/* 80005300 00002300  41 A2 00 44 */	bc 13, 2, _no_args
/* 80005304 00002304  7C C5 32 14 */	add r6, r5, r6
/* 80005308 00002308  81 C6 00 00 */	lwz r14, 0x0(r6)
/* 8000530C 0000230C  28 0E 00 00 */	cmplwi r14, 0x0
/* 80005310 00002310  41 82 00 34 */	beq _no_args
/* 80005314 00002314  39 E6 00 04 */	addi r15, r6, 0x4
/* 80005318 00002318  7D C9 03 A6 */	mtctr r14
_loop:
/* 8000531C 0000231C  38 C6 00 04 */	addi r6, r6, 0x4
/* 80005320 00002320  80 E6 00 00 */	lwz r7, 0x0(r6)
/* 80005324 00002324  7C E7 2A 14 */	add r7, r7, r5
/* 80005328 00002328  90 E6 00 00 */	stw r7, 0x0(r6)
/* 8000532C 0000232C  42 00 FF F0 */	bdnz _loop
/* 80005330 00002330  3C A0 80 00 */	lis r5, 0x80000034@ha
/* 80005334 00002334  38 A5 00 34 */	addi r5, r5, 0x80000034@l
/* 80005338 00002338  55 E7 00 34 */	rlwinm r7, r15, 0, 0, 26
/* 8000533C 0000233C  90 E5 00 00 */	stw r7, 0x0(r5)
/* 80005340 00002340  48 00 00 0C */	b _end_of_parseargs
_no_args:
/* 80005344 00002344  39 C0 00 00 */	li r14, 0x0
/* 80005348 00002348  39 E0 00 00 */	li r15, 0x0

.global _end_of_parseargs
_end_of_parseargs:
/* 8000534C 0000234C  48 15 BF 19 */	bl DBInit
/* 80005350 00002350  48 15 C1 8D */	bl zz_801614dc_
/* 80005354 00002354  3C 80 80 00 */	lis r4, 0x800030E6@ha
/* 80005358 00002358  38 84 30 E6 */	addi r4, r4, 0x800030E6@l
/* 8000535C 0000235C  A0 64 00 00 */	lhz r3, 0x0(r4)
/* 80005360 00002360  70 65 80 00 */	andi. r5, r3, 0x8000
/* 80005364 00002364  41 82 00 10 */	beq _check_pad3
/* 80005368 00002368  70 63 7F FF */	andi. r3, r3, 0x7fff
/* 8000536C 0000236C  28 03 00 01 */	cmplwi r3, 0x1
/* 80005370 00002370  40 82 00 08 */	bne _skip_crc
_check_pad3:
/* 80005374 00002374  4B FF FE 79 */	bl __check_pad3
_skip_crc:
/* 80005378 00002378  4B FF FE C1 */	bl __get_debug_bba
/* 8000537C 0000237C  28 03 00 01 */	cmplwi r3, 0x1
/* 80005380 00002380  40 82 00 08 */	bne _goto_skip_init_bba
/* 80005384 00002384  48 14 A2 45 */	bl InitMetroTRK_BBA
_goto_skip_init_bba:
/* 80005388 00002388  48 16 64 45 */	bl IFFifoAlloc_N2
/* 8000538C 0000238C  7D C3 73 78 */	mr r3, r14
/* 80005390 00002390  7D E4 7B 78 */	mr r4, r15
/* 80005394 00002394  48 01 02 B1 */	bl systemStart
/* 80005398 00002398  48 14 DD 78 */	b exit

/*KEEP SYSTEM REQ*/
.global __init_registers
__init_registers:
/* 8000539C 0000239C  38 00 00 00 */	li r0, 0x0
/* 800053A0 000023A0  38 60 00 00 */	li r3, 0x0
/* 800053A4 000023A4  38 80 00 00 */	li r4, 0x0
/* 800053A8 000023A8  38 A0 00 00 */	li r5, 0x0
/* 800053AC 000023AC  38 C0 00 00 */	li r6, 0x0
/* 800053B0 000023B0  38 E0 00 00 */	li r7, 0x0
/* 800053B4 000023B4  39 00 00 00 */	li r8, 0x0
/* 800053B8 000023B8  39 20 00 00 */	li r9, 0x0
/* 800053BC 000023BC  39 40 00 00 */	li r10, 0x0
/* 800053C0 000023C0  39 60 00 00 */	li r11, 0x0
/* 800053C4 000023C4  39 80 00 00 */	li r12, 0x0
/* 800053C8 000023C8  39 C0 00 00 */	li r14, 0x0
/* 800053CC 000023CC  39 E0 00 00 */	li r15, 0x0
/* 800053D0 000023D0  3A 00 00 00 */	li r16, 0x0
/* 800053D4 000023D4  3A 20 00 00 */	li r17, 0x0
/* 800053D8 000023D8  3A 40 00 00 */	li r18, 0x0
/* 800053DC 000023DC  3A 60 00 00 */	li r19, 0x0
/* 800053E0 000023E0  3A 80 00 00 */	li r20, 0x0
/* 800053E4 000023E4  3A A0 00 00 */	li r21, 0x0
/* 800053E8 000023E8  3A C0 00 00 */	li r22, 0x0
/* 800053EC 000023EC  3A E0 00 00 */	li r23, 0x0
/* 800053F0 000023F0  3B 00 00 00 */	li r24, 0x0
/* 800053F4 000023F4  3B 20 00 00 */	li r25, 0x0
/* 800053F8 000023F8  3B 40 00 00 */	li r26, 0x0
/* 800053FC 000023FC  3B 60 00 00 */	li r27, 0x0
/* 80005400 00002400  3B 80 00 00 */	li r28, 0x0
/* 80005404 00002404  3B A0 00 00 */	li r29, 0x0
/* 80005408 00002408  3B C0 00 00 */	li r30, 0x0
/* 8000540C 0000240C  3B E0 00 00 */	li r31, 0x0
/* 80005410 00002410  3C 20 80 67 */	lis r1, 0x806702F0@h
/* 80005414 00002414  60 21 02 F0 */	ori r1, r1, 0x806702F0@l
/* 80005418 00002418  3C 40 80 66 */	lis r2, 0x80663D40@h
/* 8000541C 0000241C  60 42 3D 40 */	ori r2, r2, 0x80663D40@l
/* 80005420 00002420  3D A0 80 66 */	lis r13, 0x80661EC0@h
/* 80005424 00002424  61 AD 1E C0 */	ori r13, r13, 0x80661EC0@l
/* 80005428 00002428  4E 80 00 20 */	blr

.global __init_data
__init_data:
/* 8000542C 0000242C  7C 08 02 A6 */	mflr r0
/* 80005430 00002430  90 01 00 04 */	stw r0, 0x4(r1)
/* 80005434 00002434  94 21 FF E8 */	stwu r1, -0x18(r1)
/* 80005438 00002438  93 E1 00 14 */	stw r31, 0x14(r1)
/* 8000543C 0000243C  93 C1 00 10 */	stw r30, 0x10(r1)
/* 80005440 00002440  93 A1 00 0C */	stw r29, 0xc(r1)
/* 80005444 00002444  3C 60 80 00 */	lis r3, lbl_80005544@ha
/* 80005448 00002448  38 03 55 44 */	addi r0, r3, lbl_80005544@l
/* 8000544C 0000244C  7C 1D 03 78 */	mr r29, r0
/* 80005450 00002450  48 00 00 04 */	b  __init_data_fn

.global  __init_data_fn
 __init_data_fn:
/* 80005454 00002454  48 00 00 04 */	b  __init_data_fn0

.global  __init_data_fn0
 __init_data_fn0:
/* 80005458 00002458  83 DD 00 08 */	lwz r30, 0x8(r29)
/* 8000545C 0000245C  28 1E 00 00 */	cmplwi r30, 0x0
/* 80005460 00002460  41 82 00 38 */	beq lbl_80005498
/* 80005464 00002464  80 9D 00 00 */	lwz r4, 0x0(r29)
/* 80005468 00002468  83 FD 00 04 */	lwz r31, 0x4(r29)
/* 8000546C 0000246C  41 82 00 24 */	beq lbl_80005490
/* 80005470 00002470  7C 1F 20 40 */	cmplw r31, r4
/* 80005474 00002474  41 82 00 1C */	beq lbl_80005490
/* 80005478 00002478  7F E3 FB 78 */	mr r3, r31
/* 8000547C 0000247C  7F C5 F3 78 */	mr r5, r30
/* 80005480 00002480  4B FF FD 1D */	bl memcpy
/* 80005484 00002484  7F E3 FB 78 */	mr r3, r31
/* 80005488 00002488  7F C4 F3 78 */	mr r4, r30
/* 8000548C 0000248C  48 00 00 85 */	bl __flush_cache
lbl_80005490:
/* 80005490 00002490  3B BD 00 0C */	addi r29, r29, 0xc
/* 80005494 00002494  4B FF FF C4 */	b  __init_data_fn0
lbl_80005498:
/* 80005498 00002498  3C 60 80 00 */	lis r3, lbl_800055C8@ha
/* 8000549C 0000249C  38 03 55 C8 */	addi r0, r3, lbl_800055C8@l
/* 800054A0 000024A0  7C 1D 03 78 */	mr r29, r0
/* 800054A4 000024A4  48 00 00 04 */	b  __init_data_fn0n

.global  __init_data_fn0n
 __init_data_fn0n:
/* 800054A8 000024A8  48 00 00 04 */	b  __init_data_fn0nn

.global  __init_data_fn0nn
 __init_data_fn0nn:
/* 800054AC 000024AC  80 BD 00 04 */	lwz r5, 0x4(r29)
/* 800054B0 000024B0  28 05 00 00 */	cmplwi r5, 0x0
/* 800054B4 000024B4  41 82 00 1C */	beq lbl_800054D0
/* 800054B8 000024B8  80 7D 00 00 */	lwz r3, 0x0(r29)
/* 800054BC 000024BC  41 82 00 0C */	beq lbl_800054C8
/* 800054C0 000024C0  38 80 00 00 */	li r4, 0x0
/* 800054C4 000024C4  4B FF FB F1 */	bl TRK_memset_N2
lbl_800054C8:
/* 800054C8 000024C8  3B BD 00 08 */	addi r29, r29, 0x8
/* 800054CC 000024CC  4B FF FF E0 */	b  __init_data_fn0nn
lbl_800054D0:
/* 800054D0 000024D0  80 01 00 1C */	lwz r0, 0x1c(r1)
/* 800054D4 000024D4  83 E1 00 14 */	lwz r31, 0x14(r1)
/* 800054D8 000024D8  83 C1 00 10 */	lwz r30, 0x10(r1)
/* 800054DC 000024DC  83 A1 00 0C */	lwz r29, 0xc(r1)
/* 800054E0 000024E0  38 21 00 18 */	addi r1, r1, 0x18
/* 800054E4 000024E4  7C 08 03 A6 */	mtlr r0
/* 800054E8 000024E8  4E 80 00 20 */	blr

.global __init_hardware
__init_hardware:
/* 800054EC 000024EC  7C 00 00 A6 */	mfmsr r0
/* 800054F0 000024F0  60 00 20 00 */	ori r0, r0, 0x2000
/* 800054F4 000024F4  7C 00 01 24 */	mtmsr r0
/* 800054F8 000024F8  7F E8 02 A6 */	mflr r31
/* 800054FC 000024FC  48 15 C8 8D */	bl __OSPSInit
/* 80005500 00002500  48 15 BE 51 */	bl __OSFPRInit
/* 80005504 00002504  48 15 DF BD */	bl __OSCacheInit
/* 80005508 00002508  7F E8 03 A6 */	mtlr r31
/* 8000550C 0000250C  4E 80 00 20 */	blr

.global __flush_cache
__flush_cache:
/* 80005510 00002510  3C A0 FF FF */	lis r5, 0xFFFFFFF1@h
/* 80005514 00002514  60 A5 FF F1 */	ori r5, r5, 0xFFFFFFF1@l
/* 80005518 00002518  7C A5 18 38 */	and r5, r5, r3
/* 8000551C 0000251C  7C 65 18 50 */	subf r3, r5, r3
/* 80005520 00002520  7C 84 1A 14 */	add r4, r4, r3
lbl_80005524:
/* 80005524 00002524  7C 00 28 6C */	dcbst r0, r5
/* 80005528 00002528  7C 00 04 AC */	sync
/* 8000552C 0000252C  7C 00 2F AC */	icbi r0, r5
/* 80005530 00002530  30 A5 00 08 */	addic r5, r5, 0x8
/* 80005534 00002534  34 84 FF F8 */	addic. r4, r4, -0x8
/* 80005538 00002538  40 80 FF EC */	bge lbl_80005524
/* 8000553C 0000253C  4C 00 01 2C */	isync
/* 80005540 00002540  4E 80 00 20 */	blr
lbl_80005544:
/* 80005544 00002544  80 00 31 00 */	lwz r0, 0x3100(r0)
/* 80005548 00002548  80 00 31 00 */	lwz r0, 0x3100(r0)
/* 8000554C 0000254C  00 00 24 E8 */	.4byte 0x000024E8  /* <illegal> */
/* 80005550 00002550  80 00 56 00 */	lwz r0, 0x5600(r0)
/* 80005554 00002554  80 00 56 00 */	lwz r0, 0x5600(r0)
/* 80005558 00002558  00 00 10 68 */	.4byte 0x00001068  /* <illegal> */
/* 8000555C 0000255C  80 00 66 80 */	lwz r0, 0x6680(r0)
/* 80005560 00002560  80 00 66 80 */	lwz r0, 0x6680(r0)
/* 80005564 00002564  00 00 11 F0 */	.4byte 0x000011F0  /* <illegal> */
/* 80005568 00002568  80 00 78 80 */	lwz r0, 0x7880(r0)
/* 8000556C 0000256C  80 00 78 80 */	lwz r0, 0x7880(r0)
/* 80005570 00002570  00 1F 5D E0 */	.4byte 0x001F5DE0  /* <illegal> */
/* 80005574 00002574  80 1F D6 60 */	lwz r0, -0x29a0(r31)
/* 80005578 00002578  80 1F D6 60 */	lwz r0, -0x29a0(r31)
/* 8000557C 0000257C  00 00 00 50 */	.4byte 0x00000050  /* <illegal> */
/* 80005580 00002580  80 1F D6 C0 */	lwz r0, -0x2940(r31)
/* 80005584 00002584  80 1F D6 C0 */	lwz r0, -0x2940(r31)
/* 80005588 00002588  00 00 00 10 */	.4byte 0x00000010  /* <illegal> */
/* 8000558C 0000258C  80 1F D6 E0 */	lwz r0, -0x2920(r31)
/* 80005590 00002590  80 1F D6 E0 */	lwz r0, -0x2920(r31)
/* 80005594 00002594  00 01 24 D0 */	.4byte 0x000124D0  /* <illegal> */
/* 80005598 00002598  80 20 FB C0 */	lwz r1, -0x440(r0)
/* 8000559C 0000259C  80 20 FB C0 */	lwz r1, -0x440(r0)
/* 800055A0 000025A0  00 04 C6 35 */	.4byte 0x0004C635  /* <illegal> */
/* 800055A4 000025A4  80 65 9E C0 */	lwz r3, -0x6140(r5)
/* 800055A8 000025A8  80 65 9E C0 */	lwz r3, -0x6140(r5)
/* 800055AC 000025AC  00 00 12 6C */	.4byte 0x0000126C  /* <illegal> */
/* 800055B0 000025B0  80 65 BD 40 */	lwz r3, -0x42c0(r5)
/* 800055B4 000025B4  80 65 BD 40 */	lwz r3, -0x42c0(r5)
/* 800055B8 000025B8  00 00 42 04 */	.4byte 0x00004204  /* <illegal> */
/* 800055BC 000025BC  00 00 00 00 */	.4byte 0x00000000
/* 800055C0 000025C0  00 00 00 00 */	.4byte 0x00000000
/* 800055C4 000025C4  00 00 00 00 */	.4byte 0x00000000
lbl_800055C8:
/* 800055C8 000025C8  80 25 C2 00 */	lwz r1, -0x3e00(r5)
/* 800055CC 000025CC  00 3F DC B0 */	.4byte 0x003FDCB0  /* <illegal> */
/* 800055D0 000025D0  80 65 B1 40 */	lwz r3, -0x4ec0(r5)
/* 800055D4 000025D4  00 00 0B F8 */	.4byte 0x00000BF8  /* <illegal> */
/* 800055D8 000025D8  80 65 FF 60 */	lwz r3, -0xa0(r5)
/* 800055DC 000025DC  00 00 03 90 */	.4byte 0x00000390  /* <illegal> */
/* 800055E0 000025E0  00 00 00 00 */	.4byte 0x00000000
/* 800055E4 000025E4  00 00 00 00 */	.4byte 0x00000000
/* 800055E8 000025E8  00 00 00 00 */	.4byte 0x00000000
/* 800055EC 000025EC  00 00 00 00 */	.4byte 0x00000000
/* 800055F0 000025F0  00 00 00 00 */	.4byte 0x00000000
/* 800055F4 000025F4  00 00 00 00 */	.4byte 0x00000000
/* 800055F8 000025F8  00 00 00 00 */	.4byte 0x00000000
/* 800055FC 000025FC  00 00 00 00 */	.4byte 0x00000000
