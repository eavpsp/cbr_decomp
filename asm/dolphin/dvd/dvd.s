.include "macros.s"

.section .text, "ax"  # 0x80007880 - 0x801FD660 ; 0x001F5DE0

.global initDVD
initDVD:
/* 8000AB90 00005910  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 8000AB94 00005914  7C 08 02 A6 */	mflr r0
/* 8000AB98 00005918  3C 63 00 10 */	addis r3, r3, 0x10
/* 8000AB9C 0000591C  90 01 00 14 */	stw r0, 0x14(r1)
/* 8000ABA0 00005920  38 63 F3 A4 */	addi r3, r3, -0xc5c
/* 8000ABA4 00005924  48 19 F2 D9 */	bl stopAudioAndinitDVDDataAndCloseDvdIfNeeded
/* 8000ABA8 00005928  80 01 00 14 */	lwz r0, 0x14(r1)
/* 8000ABAC 0000592C  7C 08 03 A6 */	mtlr r0
/* 8000ABB0 00005930  38 21 00 10 */	addi r1, r1, 0x10
/* 8000ABB4 00005934  4E 80 00 20 */	blr

.global MovieHandler
MovieHandler:
/* 8000ABB8 00005938  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 8000ABBC 0000593C  7C 08 02 A6 */	mflr r0
/* 8000ABC0 00005940  38 E0 00 01 */	li r7, 0x1
/* 8000ABC4 00005944  90 01 00 14 */	stw r0, 0x14(r1)
/* 8000ABC8 00005948  54 C0 07 FE */	clrlwi r0, r6, 31
/* 8000ABCC 0000594C  93 E1 00 0C */	stw r31, 0xc(r1)
/* 8000ABD0 00005950  7C 7F 1B 78 */	mr r31, r3
/* 8000ABD4 00005954  3C 7F 00 10 */	addis r3, r31, 0x10
/* 8000ABD8 00005958  90 C3 F4 5C */	stw r6, -0xba4(r3)
/* 8000ABDC 0000595C  7C 06 03 78 */	mr r6, r0
/* 8000ABE0 00005960  38 63 F3 A4 */	addi r3, r3, -0xc5c
/* 8000ABE4 00005964  48 19 F2 F1 */	bl initializeDataAndStoreResult
/* 8000ABE8 00005968  3C 60 80 66 */	lis r3, lbl_8065AB80@ha
/* 8000ABEC 0000596C  3C 80 80 36 */	lis r4, lbl_80360E10@ha
/* 8000ABF0 00005970  38 A3 AB 80 */	addi r5, r3, lbl_8065AB80@l
/* 8000ABF4 00005974  3D 3F 00 10 */	addis r9, r31, 0x10
/* 8000ABF8 00005978  C0 05 00 00 */	lfs f0, 0x0(r5)
/* 8000ABFC 0000597C  39 44 0E 10 */	addi r10, r4, lbl_80360E10@l
/* 8000AC00 00005980  3C 60 80 36 */	lis r3, lbl_80360AE8@ha
/* 8000AC04 00005984  3C 80 80 01 */	lis r4, UpdateMovie@ha
/* 8000AC08 00005988  D0 09 F4 6C */	stfs f0, -0xb94(r9)
/* 8000AC0C 0000598C  38 63 0A E8 */	addi r3, r3, lbl_80360AE8@l
/* 8000AC10 00005990  38 00 10 00 */	li r0, 0x1000
/* 8000AC14 00005994  38 84 AC 64 */	addi r4, r4, UpdateMovie@l
/* 8000AC18 00005998  D0 09 F4 68 */	stfs f0, -0xb98(r9)
/* 8000AC1C 0000599C  7F E5 FB 78 */	mr r5, r31
/* 8000AC20 000059A0  38 CA 10 00 */	addi r6, r10, 0x1000
/* 8000AC24 000059A4  38 E0 10 00 */	li r7, 0x1000
/* 8000AC28 000059A8  D0 09 F4 64 */	stfs f0, -0xb9c(r9)
/* 8000AC2C 000059AC  39 00 00 10 */	li r8, 0x10
/* 8000AC30 000059B0  D0 09 F4 60 */	stfs f0, -0xba0(r9)
/* 8000AC34 000059B4  39 20 00 01 */	li r9, 0x1
/* 8000AC38 000059B8  91 43 03 18 */	stw r10, 0x318(r3)
/* 8000AC3C 000059BC  90 03 03 1C */	stw r0, 0x31c(r3)
/* 8000AC40 000059C0  48 15 F9 15 */	bl initialize_instance
/* 8000AC44 000059C4  3C 60 80 36 */	lis r3, lbl_80360AE8@ha
/* 8000AC48 000059C8  38 63 0A E8 */	addi r3, r3, lbl_80360AE8@l
/* 8000AC4C 000059CC  48 15 FD 91 */	bl OSResumeThread
/* 8000AC50 000059D0  80 01 00 14 */	lwz r0, 0x14(r1)
/* 8000AC54 000059D4  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 8000AC58 000059D8  7C 08 03 A6 */	mtlr r0
/* 8000AC5C 000059DC  38 21 00 10 */	addi r1, r1, 0x10
/* 8000AC60 000059E0  4E 80 00 20 */	blr
UpdateMovie:
/* 8000AC64 000059E4  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 8000AC68 000059E8  7C 08 02 A6 */	mflr r0
/* 8000AC6C 000059EC  90 01 00 24 */	stw r0, 0x24(r1)
/* 8000AC70 000059F0  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 8000AC74 000059F4  93 C1 00 18 */	stw r30, 0x18(r1)
/* 8000AC78 000059F8  93 A1 00 14 */	stw r29, 0x14(r1)
/* 8000AC7C 000059FC  7C 7D 1B 78 */	mr r29, r3
/* 8000AC80 00005A00  48 16 7C 2D */	bl IPCGetBufferLo_N3
/* 8000AC84 00005A04  3F DD 00 10 */	addis r30, r29, 0x10
/* 8000AC88 00005A08  7C 7D 1B 78 */	mr r29, r3
/* 8000AC8C 00005A0C  3B DE F3 A4 */	addi r30, r30, -0xc5c
/* 8000AC90 00005A10  48 00 00 08 */	b func_8000AC98
lbl_8000AC94:
/* 8000AC94 00005A14  48 16 69 9D */	bl VIWaitForRetrace

.global func_8000AC98
func_8000AC98:
/* 8000AC98 00005A18  48 16 7C 15 */	bl IPCGetBufferLo_N3
/* 8000AC9C 00005A1C  7C 1D 18 40 */	cmplw r29, r3
/* 8000ACA0 00005A20  41 82 FF F4 */	beq lbl_8000AC94
/* 8000ACA4 00005A24  48 16 7C 09 */	bl IPCGetBufferLo_N3
/* 8000ACA8 00005A28  80 1E 00 00 */	lwz r0, 0x0(r30)
/* 8000ACAC 00005A2C  7C 7D 1B 78 */	mr r29, r3
/* 8000ACB0 00005A30  28 00 00 00 */	cmplwi r0, 0x0
/* 8000ACB4 00005A34  41 82 00 54 */	beq lbl_8000AD08
/* 8000ACB8 00005A38  7F C3 F3 78 */	mr r3, r30
/* 8000ACBC 00005A3C  48 19 EF 5D */	bl ProcessMediaAndHandleErrors
/* 8000ACC0 00005A40  7C 7F 1B 79 */	mr. r31, r3
/* 8000ACC4 00005A44  40 80 00 44 */	bge lbl_8000AD08
/* 8000ACC8 00005A48  7F C3 F3 78 */	mr r3, r30
/* 8000ACCC 00005A4C  48 19 F1 B1 */	bl stopAudioAndinitDVDDataAndCloseDvdIfNeeded
/* 8000ACD0 00005A50  3C 60 80 20 */	lis r3, s_error_on_play_movie_____d_801fda8c@ha
/* 8000ACD4 00005A54  7F E4 FB 78 */	mr r4, r31
/* 8000ACD8 00005A58  38 63 DA 8C */	addi r3, r3, s_error_on_play_movie_____d_801fda8c@l
/* 8000ACDC 00005A5C  4C C6 31 82 */	crclr 6
/* 8000ACE0 00005A60  48 18 64 D5 */	bl WriteStringToBuffer
/* 8000ACE4 00005A64  3C E0 80 20 */	lis r7, s_game_cpp_801fda80@ha
/* 8000ACE8 00005A68  3C A0 80 21 */	lis r5, s_UpdateMovie_8020fc30@ha
/* 8000ACEC 00005A6C  7C 66 1B 78 */	mr r6, r3
/* 8000ACF0 00005A70  38 80 0E F8 */	li r4, 0xef8
/* 8000ACF4 00005A74  38 67 DA 80 */	addi r3, r7, s_game_cpp_801fda80@l
/* 8000ACF8 00005A78  38 E5 FC 30 */	addi r7, r5, s_UpdateMovie_8020fc30@l
/* 8000ACFC 00005A7C  38 A2 80 28 */	addi r5, r2, lbl_8065BD68@sda21
/* 8000AD00 00005A80  4C C6 31 82 */	crclr 6
/* 8000AD04 00005A84  48 15 92 7D */	bl OSPanic
lbl_8000AD08:
/* 8000AD08 00005A88  80 1E 00 00 */	lwz r0, 0x0(r30)
/* 8000AD0C 00005A8C  28 00 00 00 */	cmplwi r0, 0x0
/* 8000AD10 00005A90  40 82 FF 88 */	bne func_8000AC98
/* 8000AD14 00005A94  80 01 00 24 */	lwz r0, 0x24(r1)
/* 8000AD18 00005A98  38 60 00 00 */	li r3, 0x0
/* 8000AD1C 00005A9C  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 8000AD20 00005AA0  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 8000AD24 00005AA4  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 8000AD28 00005AA8  7C 08 03 A6 */	mtlr r0
/* 8000AD2C 00005AAC  38 21 00 20 */	addi r1, r1, 0x20
/* 8000AD30 00005AB0  4E 80 00 20 */	blr
